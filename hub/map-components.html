<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Componentes de Mapa - Design System Workalógico">
  <meta name="robots" content="noindex, nofollow">
  
  <title>Componentes de Mapa | Design System Hub</title>
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="../LOGOS/teseracto yellow@3x.png">
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  
  <!-- Mapbox GL JS -->
  <script src="https://api.mapbox.com/mapbox-gl-js/v3.0.0/mapbox-gl.js"></script>
  <link href="https://api.mapbox.com/mapbox-gl-js/v3.0.0/mapbox-gl.css" rel="stylesheet" />
  
  <!-- H3 Library (for hexagons) -->
  <script src="https://unpkg.com/h3-js@4"></script>
  
  <!-- Design Tokens + Design System -->
  <link rel="stylesheet" href="../wo-tokens.css">
  <link rel="stylesheet" href="../wo-design-system.css">
  
  <!-- Hub Styles -->
  <link rel="stylesheet" href="hub.css">
  
  <!-- Mapbox Component -->
  <link rel="stylesheet" href="../wo-components/wo-mapbox.css">
  
  <style>
    /* Demo containers */
    .demo-map {
      width: 100%;
      height: 350px;
      border-radius: var(--radius-lg);
      overflow: hidden;
      border: 1px solid var(--border-accent);
      margin: 1rem 0;
      position: relative;
    }
    
    .demo-map-inner {
      width: 100%;
      height: 100%;
    }
    
    /* Component preview cards */
    .component-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.25rem;
      margin: 1.5rem 0;
    }
    
    .component-card {
      background: var(--wo-dark-surface);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg);
      padding: 1.25rem;
      transition: all 0.2s ease;
    }
    
    .component-card:hover {
      border-color: var(--wo-blue-lab);
      transform: translateY(-2px);
    }
    
    .component-card__header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1rem;
    }
    
    .component-card__title {
      font-family: var(--font-heading);
      font-size: 1rem;
      font-weight: 600;
      color: var(--wo-text);
    }
    
    .component-card__badge {
      padding: 3px 8px;
      border-radius: 12px;
      font-size: 0.65rem;
      font-weight: 600;
      background: var(--wo-accent-dim);
      color: var(--wo-blue-lab);
    }
    
    .component-card__preview {
      background: var(--wo-dark);
      border-radius: var(--radius-md);
      padding: 1rem;
      min-height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 1rem;
    }
    
    .component-card__desc {
      font-size: 0.8rem;
      color: var(--wo-text-secondary);
      margin-bottom: 0.75rem;
    }
    
    /* Demo controls */
    .demo-controls {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      margin: 1rem 0;
    }
    
    .demo-btn {
      padding: 0.5rem 1rem;
      background: var(--wo-dark-surface);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-md);
      color: var(--wo-text-secondary);
      font-family: var(--font-heading);
      font-size: 0.75rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .demo-btn:hover {
      background: var(--wo-accent-dim);
      border-color: var(--wo-blue-lab);
      color: var(--wo-text);
    }
    
    .demo-btn.active {
      background: rgba(99, 102, 241, 0.3);
      border-color: var(--wo-blue-lab);
      color: #fff;
    }
    
    /* Inline previews */
    .preview-row {
      display: flex;
      gap: 1rem;
      align-items: center;
      flex-wrap: wrap;
    }
    
    /* API reference table */
    .api-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.85rem;
      margin: 1rem 0;
    }
    
    .api-table th,
    .api-table td {
      padding: 0.75rem 1rem;
      text-align: left;
      border-bottom: 1px solid var(--border-subtle);
    }
    
    .api-table th {
      font-family: var(--font-heading);
      font-weight: 600;
      color: var(--wo-text-secondary);
      text-transform: uppercase;
      font-size: 0.7rem;
      letter-spacing: 0.05em;
    }
    
    .api-table td {
      color: var(--wo-text);
    }
    
    .api-table code {
      background: var(--wo-dark);
      padding: 0.15rem 0.4rem;
      border-radius: var(--radius-sm);
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      color: var(--wo-blue-lab);
    }
    
    .api-table tr:hover {
      background: rgba(99, 102, 241, 0.05);
    }
  </style>
</head>
<body>
  <div class="hub-layout">
    <!-- Sidebar -->
    <aside class="hub-sidebar">
      <div class="hub-logo">
        <img src="../LOGOS/logo light @3x.png" alt="Workalógico">
        <span class="hub-version">Design System v2.1</span>
      </div>
      
      <nav class="hub-nav">
        <h4>Inicio</h4>
        <a href="index.html">
          <span class="nav-icon"><svg viewBox="0 0 24 24"><path d="M3 11l9-7 9 7"/><path d="M5 10v10h14V10"/></svg></span> Dashboard
        </a>
        
        <h4>Fundamentos</h4>
        <a href="colors.html">
          <span class="nav-icon"><svg viewBox="0 0 24 24"><path d="M12 3a9 9 0 1 0 0 18h3a2 2 0 0 0 0-4h-1a2 2 0 0 1 0-4h2a2 2 0 0 0 2-2 6 6 0 0 0-6-6z"/><circle cx="8" cy="10" r="1"/><circle cx="6.5" cy="14" r="1"/><circle cx="10.5" cy="6.5" r="1"/></svg></span> Colores
        </a>
        <a href="typography.html">
          <span class="nav-icon"><svg viewBox="0 0 24 24"><path d="M5 6h14"/><path d="M12 6v12"/><path d="M8 18h8"/></svg></span> Tipografía
        </a>
        <a href="spacing.html">
          <span class="nav-icon"><svg viewBox="0 0 24 24"><path d="M4 7h16"/><path d="M4 17h16"/><path d="M7 9v6"/><path d="M12 9v6"/><path d="M17 9v6"/></svg></span> Espaciado
        </a>
        
        <h4>Componentes</h4>
        <a href="components.html">
          <span class="nav-icon"><svg viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg></span> Componentes
        </a>
        <a href="templates.html">
          <span class="nav-icon"><svg viewBox="0 0 24 24"><path d="M7 3h7l5 5v13H7z"/><path d="M14 3v5h5"/></svg></span> Templates
        </a>
        <a href="mapbox.html">
          <span class="nav-icon"><svg viewBox="0 0 24 24"><path d="M3 6l6-2 6 2 6-2v14l-6 2-6-2-6 2z"/><path d="M9 4v14"/><path d="M15 6v14"/></svg></span> Mapbox Theme
        </a>
        <a href="map-components.html" class="active">
          <span class="nav-icon"><svg viewBox="0 0 24 24"><path d="M12 21s6-6.5 6-11a6 6 0 1 0-12 0c0 4.5 6 11 6 11z"/><circle cx="12" cy="10" r="2.5"/></svg></span> Map Components
        </a>
        
        <h4>Assets</h4>
        <a href="assets.html">
          <span class="nav-icon"><svg viewBox="0 0 24 24"><path d="M3 12l9 9 9-9-9-9H3z"/><circle cx="8" cy="8" r="1.5"/></svg></span> Logos
        </a>
        <a href="backgrounds.html">
          <span class="nav-icon"><svg viewBox="0 0 24 24"><rect x="3" y="6" width="18" height="12" rx="2"/><path d="M3 17l5-5 4 4 3-3 6 6"/><circle cx="8" cy="10" r="2"/></svg></span> Fondos
        </a>
        <a href="icons.html">
          <span class="nav-icon"><svg viewBox="0 0 24 24"><path d="M12 3l2.5 5 5.5.8-4 3.9.9 5.5-4.9-2.6-4.9 2.6.9-5.5-4-3.9 5.5-.8z"/></svg></span> Iconos
        </a>
        
        <h4>Recursos</h4>
        <a href="../index.html">
          <span class="nav-icon"><svg viewBox="0 0 24 24"><rect x="4" y="7" width="16" height="11" rx="2"/><path d="M9 7V5h6v2"/><path d="M4 12h16"/></svg></span> Ver Decks
        </a>
      </nav>
    </aside>
    
    <!-- Main Content -->
    <main class="hub-main">
      <header class="hub-header">
        <h1>Map <span class="accent">Components</span></h1>
        <p>Suite completa de componentes para visualización geoespacial: hexágonos H3, grids, heatmaps, clusters, popups y leyendas.</p>
      </header>
      
      <!-- Quick Stats -->
      <div class="hub-stats" style="margin-bottom: 2rem;">
        <div class="hub-stat-card">
          <div class="hub-stat-value">10</div>
          <div class="hub-stat-label">Componentes</div>
        </div>
        <div class="hub-stat-card">
          <div class="hub-stat-value">3</div>
          <div class="hub-stat-label">Escalas CVD-Safe</div>
        </div>
        <div class="hub-stat-card">
          <div class="hub-stat-value">H3</div>
          <div class="hub-stat-label">Uber Method</div>
        </div>
        <div class="hub-stat-card">
          <div class="hub-stat-value">WCAG</div>
          <div class="hub-stat-label">AA Compliant</div>
        </div>
      </div>
      
      <!-- Live Demo -->
      <section class="hub-section">
        <h2>Demo Interactivo</h2>
        <p>Explora los diferentes tipos de visualización geoespacial.</p>
        
        <div class="demo-controls">
          <button class="demo-btn active" onclick="showDemo('hexagons')">H3 Hexágonos</button>
          <button class="demo-btn" onclick="showDemo('grid')">Grid</button>
          <button class="demo-btn" onclick="showDemo('heatmap')">Heatmap</button>
          <button class="demo-btn" onclick="showDemo('clusters')">Clusters</button>
          <button class="demo-btn" onclick="showDemo('isochrones')">Isócronas</button>
        </div>
        
        <div class="demo-map" id="demo-container">
          <div class="demo-map-inner" id="demo-map"></div>
        </div>
      </section>
      
      <!-- Component Cards -->
      <section class="hub-section">
        <h2>Componentes Disponibles</h2>
        
        <div class="component-grid">
          <!-- H3 Hexagons -->
          <div class="component-card">
            <div class="component-card__header">
              <span class="component-card__title">WoH3Layer</span>
              <span class="component-card__badge">Uber H3</span>
            </div>
            <div class="component-card__preview">
              <svg width="120" height="80" viewBox="0 0 120 80">
                <polygon points="30,10 50,10 60,26 50,42 30,42 20,26" fill="rgba(99,102,241,0.4)" stroke="#6366F1" stroke-width="1"/>
                <polygon points="50,10 70,10 80,26 70,42 50,42 40,26" fill="rgba(99,102,241,0.6)" stroke="#6366F1" stroke-width="1"/>
                <polygon points="70,10 90,10 100,26 90,42 70,42 60,26" fill="rgba(251,191,36,0.6)" stroke="#FBBF24" stroke-width="1"/>
                <polygon points="40,42 60,42 70,58 60,74 40,74 30,58" fill="rgba(251,191,36,0.8)" stroke="#FBBF24" stroke-width="1"/>
                <polygon points="60,42 80,42 90,58 80,74 60,74 50,58" fill="rgba(99,102,241,0.5)" stroke="#6366F1" stroke-width="1"/>
              </svg>
            </div>
            <p class="component-card__desc">Visualización de hexágonos H3 (metodología Uber) para agregación espacial uniforme.</p>
            <code style="font-size: 0.7rem;">new WoH3Layer(map, { resolution: 8 })</code>
          </div>
          
          <!-- Grid -->
          <div class="component-card">
            <div class="component-card__header">
              <span class="component-card__title">WoGridLayer</span>
              <span class="component-card__badge">Cuadrícula</span>
            </div>
            <div class="component-card__preview">
              <svg width="120" height="80" viewBox="0 0 120 80">
                <rect x="10" y="10" width="25" height="25" fill="rgba(67,56,202,0.6)" stroke="rgba(99,102,241,0.3)"/>
                <rect x="35" y="10" width="25" height="25" fill="rgba(99,102,241,0.5)" stroke="rgba(99,102,241,0.3)"/>
                <rect x="60" y="10" width="25" height="25" fill="rgba(165,180,252,0.5)" stroke="rgba(99,102,241,0.3)"/>
                <rect x="85" y="10" width="25" height="25" fill="rgba(251,191,36,0.6)" stroke="rgba(99,102,241,0.3)"/>
                <rect x="10" y="35" width="25" height="25" fill="rgba(99,102,241,0.4)" stroke="rgba(99,102,241,0.3)"/>
                <rect x="35" y="35" width="25" height="25" fill="rgba(251,191,36,0.7)" stroke="rgba(99,102,241,0.3)"/>
                <rect x="60" y="35" width="25" height="25" fill="rgba(255,203,0,0.8)" stroke="rgba(99,102,241,0.3)"/>
                <rect x="85" y="35" width="25" height="25" fill="rgba(165,180,252,0.4)" stroke="rgba(99,102,241,0.3)"/>
              </svg>
            </div>
            <p class="component-card__desc">Celdas cuadradas uniformes para análisis de datos en cuadrícula.</p>
            <code style="font-size: 0.7rem;">new WoGridLayer(map, { cellSize: 0.005 })</code>
          </div>
          
          <!-- Heatmap -->
          <div class="component-card">
            <div class="component-card__header">
              <span class="component-card__title">WoHeatmap</span>
              <span class="component-card__badge">Densidad</span>
            </div>
            <div class="component-card__preview">
              <svg width="120" height="80" viewBox="0 0 120 80">
                <defs>
                  <radialGradient id="heat1" cx="50%" cy="50%" r="50%">
                    <stop offset="0%" stop-color="#FFCB00" stop-opacity="0.9"/>
                    <stop offset="50%" stop-color="#6366F1" stop-opacity="0.5"/>
                    <stop offset="100%" stop-color="#6366F1" stop-opacity="0"/>
                  </radialGradient>
                  <radialGradient id="heat2" cx="50%" cy="50%" r="50%">
                    <stop offset="0%" stop-color="#FBBF24" stop-opacity="0.7"/>
                    <stop offset="100%" stop-color="#6366F1" stop-opacity="0"/>
                  </radialGradient>
                </defs>
                <circle cx="60" cy="40" r="35" fill="url(#heat1)"/>
                <circle cx="35" cy="55" r="20" fill="url(#heat2)"/>
                <circle cx="85" cy="30" r="18" fill="url(#heat2)"/>
              </svg>
            </div>
            <p class="component-card__desc">Mapa de calor con controles de radio, intensidad y modo de color.</p>
            <code style="font-size: 0.7rem;">new WoHeatmap(map, { colorMode: 'blue-yellow' })</code>
          </div>
          
          <!-- Clusters -->
          <div class="component-card">
            <div class="component-card__header">
              <span class="component-card__title">WoClusters</span>
              <span class="component-card__badge">Agrupamiento</span>
            </div>
            <div class="component-card__preview">
              <svg width="120" height="80" viewBox="0 0 120 80">
                <circle cx="40" cy="35" r="22" fill="#FBBF24" stroke="rgba(255,255,255,0.3)" stroke-width="3"/>
                <text x="40" y="40" text-anchor="middle" fill="#2a2a2f" font-family="Space Grotesk" font-weight="700" font-size="12">142</text>
                <circle cx="85" cy="45" r="16" fill="#6366F1" stroke="rgba(255,255,255,0.3)" stroke-width="2"/>
                <text x="85" y="50" text-anchor="middle" fill="#fff" font-family="Space Grotesk" font-weight="700" font-size="10">28</text>
                <circle cx="70" cy="20" r="6" fill="#4338CA" stroke="#fff" stroke-width="2"/>
                <circle cx="100" cy="65" r="6" fill="#4338CA" stroke="#fff" stroke-width="2"/>
              </svg>
            </div>
            <p class="component-card__desc">Agrupamiento automático de puntos con zoom interactivo.</p>
            <code style="font-size: 0.7rem;">new WoClusters(map, { clusterRadius: 50 })</code>
          </div>
          
          <!-- Isochrones -->
          <div class="component-card">
            <div class="component-card__header">
              <span class="component-card__title">WoIsochrone</span>
              <span class="component-card__badge">Tiempo</span>
            </div>
            <div class="component-card__preview">
              <svg width="120" height="80" viewBox="0 0 120 80">
                <ellipse cx="60" cy="40" rx="50" ry="35" fill="rgba(251,191,36,0.2)" stroke="#FBBF24" stroke-width="2" stroke-dasharray="4,4"/>
                <ellipse cx="60" cy="40" rx="35" ry="25" fill="rgba(165,180,252,0.2)" stroke="#A5B4FC" stroke-width="2" stroke-dasharray="4,4"/>
                <ellipse cx="60" cy="40" rx="18" ry="12" fill="rgba(99,102,241,0.3)" stroke="#6366F1" stroke-width="2" stroke-dasharray="4,4"/>
                <circle cx="60" cy="40" r="4" fill="#FFCB00"/>
              </svg>
            </div>
            <p class="component-card__desc">Áreas de alcance por tiempo de viaje (5, 10, 15 min).</p>
            <code style="font-size: 0.7rem;">new WoIsochrone(map, { times: [5, 10, 15] })</code>
          </div>
          
          <!-- Markers -->
          <div class="component-card">
            <div class="component-card__header">
              <span class="component-card__title">WoMarker</span>
              <span class="component-card__badge">Pins</span>
            </div>
            <div class="component-card__preview" style="gap: 1rem;">
              <div style="display: flex; flex-direction: column; align-items: center;">
                <div style="width: 24px; height: 28px; background: #FFCB00; border-radius: 50% 50% 50% 0; transform: rotate(-45deg);"></div>
                <span style="font-size: 0.6rem; color: #b4b6ba; margin-top: 8px;">Primary</span>
              </div>
              <div style="display: flex; flex-direction: column; align-items: center;">
                <div style="width: 24px; height: 28px; background: #6366F1; border-radius: 50% 50% 50% 0; transform: rotate(-45deg);"></div>
                <span style="font-size: 0.6rem; color: #b4b6ba; margin-top: 8px;">Secondary</span>
              </div>
              <div style="display: flex; flex-direction: column; align-items: center;">
                <div style="width: 24px; height: 28px; background: #F97316; border-radius: 50% 50% 50% 0; transform: rotate(-45deg);"></div>
                <span style="font-size: 0.6rem; color: #b4b6ba; margin-top: 8px;">Alert</span>
              </div>
            </div>
            <p class="component-card__desc">Marcadores personalizados con animación de pulso opcional.</p>
            <code style="font-size: 0.7rem;">WoMarker.add(map, lngLat, { type: 'primary' })</code>
          </div>
        </div>
      </section>
      
      <!-- Popups -->
      <section class="hub-section">
        <h2>Popups</h2>
        <p>Diferentes estilos de popup para mostrar información contextual.</p>
        
        <div class="component-grid">
          <div class="component-card">
            <div class="component-card__header">
              <span class="component-card__title">Popup Stat</span>
            </div>
            <div class="component-card__preview" style="flex-direction: column; padding: 0;">
              <div class="wo-popup-stat" style="min-width: 180px;">
                <div class="wo-popup-stat__header">
                  <h4 class="wo-popup-stat__title">Centro Norte</h4>
                  <span class="wo-popup-stat__badge wo-popup-stat__badge--high">Alto</span>
                </div>
                <div class="wo-popup-stat__metrics" style="grid-template-columns: repeat(2, 1fr);">
                  <div class="wo-popup-stat__metric">
                    <div class="wo-popup-stat__metric-value wo-popup-stat__metric-value--highlight">45K</div>
                    <div class="wo-popup-stat__metric-label">Población</div>
                  </div>
                  <div class="wo-popup-stat__metric">
                    <div class="wo-popup-stat__metric-value">$18K</div>
                    <div class="wo-popup-stat__metric-label">Ingreso</div>
                  </div>
                </div>
              </div>
            </div>
            <code style="font-size: 0.7rem;">WoPopup.stat({ title, badge, metrics })</code>
          </div>
          
          <div class="component-card">
            <div class="component-card__header">
              <span class="component-card__title">Popup Mini</span>
            </div>
            <div class="component-card__preview">
              <div class="wo-popup-mini" style="background: rgba(15,15,26,0.95); border: 1px solid rgba(99,102,241,0.4); border-radius: 8px;">
                <div class="wo-popup-mini__label">Densidad</div>
                <div class="wo-popup-mini__value">2,450 hab/km²</div>
              </div>
            </div>
            <code style="font-size: 0.7rem;">WoPopup.mini(label, value)</code>
          </div>
          
          <div class="component-card">
            <div class="component-card__header">
              <span class="component-card__title">Popup Compare</span>
            </div>
            <div class="component-card__preview" style="flex-direction: column; padding: 0;">
              <div class="wo-popup-compare" style="min-width: 200px; background: rgba(15,15,26,0.95); border: 1px solid rgba(99,102,241,0.4); border-radius: 8px; padding: 12px;">
                <div style="text-align: center; margin-bottom: 8px;">
                  <div style="font-size: 0.8rem; color: #fff;">Competencia</div>
                </div>
                <div style="display: flex; gap: 8px; align-items: center; justify-content: center;">
                  <div class="wo-popup-compare__item wo-popup-compare__item--winner" style="padding: 8px; border-radius: 6px;">
                    <div class="wo-popup-compare__value" style="font-size: 1rem;">87</div>
                    <div class="wo-popup-compare__label">Zona A</div>
                  </div>
                  <span style="color: #b4b6ba; font-size: 0.7rem;">VS</span>
                  <div class="wo-popup-compare__item" style="padding: 8px; border-radius: 6px; background: rgba(99,102,241,0.08);">
                    <div class="wo-popup-compare__value" style="font-size: 1rem;">62</div>
                    <div class="wo-popup-compare__label">Zona B</div>
                  </div>
                </div>
              </div>
            </div>
            <code style="font-size: 0.7rem;">WoPopup.compare(title, itemA, itemB)</code>
          </div>
        </div>
      </section>
      
      <!-- Legends -->
      <section class="hub-section">
        <h2>Leyendas</h2>
        <p>Leyendas para diferentes tipos de visualización de datos.</p>
        
        <div class="preview-row" style="margin: 1.5rem 0; gap: 1.5rem; flex-wrap: wrap;">
          <!-- Gradient Legend -->
          <div style="position: relative;">
            <div class="wo-legend" style="position: static;">
              <div class="wo-legend__header">
                <h5 class="wo-legend__title">Scoring</h5>
              </div>
              <div class="wo-legend-gradient__bar wo-legend-gradient__bar--sequential"></div>
              <div class="wo-legend-gradient__labels">
                <span>0</span>
                <span>50</span>
                <span>100</span>
              </div>
            </div>
          </div>
          
          <!-- Categorical Legend -->
          <div style="position: relative;">
            <div class="wo-legend" style="position: static;">
              <div class="wo-legend__header">
                <h5 class="wo-legend__title">Categorías</h5>
              </div>
              <div class="wo-legend-categorical__items">
                <div class="wo-legend-categorical__item">
                  <div class="wo-legend-categorical__color" style="background: #6366F1;"></div>
                  <span class="wo-legend-categorical__label">Retail</span>
                </div>
                <div class="wo-legend-categorical__item">
                  <div class="wo-legend-categorical__color" style="background: #22D3EE;"></div>
                  <span class="wo-legend-categorical__label">Servicios</span>
                </div>
                <div class="wo-legend-categorical__item">
                  <div class="wo-legend-categorical__color" style="background: #FBBF24;"></div>
                  <span class="wo-legend-categorical__label">Landmarks</span>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Bubble Legend -->
          <div style="position: relative;">
            <div class="wo-legend" style="position: static;">
              <div class="wo-legend__header">
                <h5 class="wo-legend__title">Población</h5>
              </div>
              <div class="wo-legend-bubble__items">
                <div class="wo-legend-bubble__item">
                  <div class="wo-legend-bubble__circle wo-legend-bubble__circle--sm"></div>
                  <span class="wo-legend-bubble__label">10K</span>
                </div>
                <div class="wo-legend-bubble__item">
                  <div class="wo-legend-bubble__circle wo-legend-bubble__circle--md"></div>
                  <span class="wo-legend-bubble__label">50K</span>
                </div>
                <div class="wo-legend-bubble__item">
                  <div class="wo-legend-bubble__circle wo-legend-bubble__circle--lg"></div>
                  <span class="wo-legend-bubble__label">100K</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="code-block">
          <div class="code-block__header">
            <span class="code-block__lang">JavaScript - Leyendas</span>
          </div>
          <div class="code-block__content">
<pre>// Leyenda de gradiente
WoLegend.gradient({
  title: 'Scoring',
  type: 'sequential',  // 'sequential' | 'divergent' | 'heat'
  labels: ['0', '50', '100'],
  position: 'bottom-right'
});

// Leyenda categórica
WoLegend.categorical({
  title: 'POIs',
  items: [
    { color: '#6366F1', label: 'Retail' },
    { color: '#22D3EE', label: 'Servicios' },
    { color: '#FBBF24', label: 'Landmarks' }
  ]
});

// Leyenda de burbujas
WoLegend.bubble({
  title: 'Población',
  labels: ['10K', '50K', '100K']
});</pre>
          </div>
        </div>
      </section>
      
      <!-- Color Scales -->
      <section class="hub-section">
        <h2>Escalas de Color (CVD-Safe)</h2>
        <p>Escalas optimizadas para accesibilidad y daltonismo.</p>
        
        <div style="display: flex; flex-direction: column; gap: 1rem; margin: 1.5rem 0;">
          <div style="display: flex; align-items: center; gap: 1rem;">
            <span style="width: 100px; font-size: 0.75rem; color: var(--wo-text-secondary);">Sequential</span>
            <div style="flex: 1; height: 20px; border-radius: 10px; background: linear-gradient(90deg, #312E81, #4338CA, #6366F1, #FBBF24, #FDE047);"></div>
            <code style="font-size: 0.7rem;">WO_MAP_SCALES.sequential</code>
          </div>
          <div style="display: flex; align-items: center; gap: 1rem;">
            <span style="width: 100px; font-size: 0.75rem; color: var(--wo-text-secondary);">Divergent</span>
            <div style="flex: 1; height: 20px; border-radius: 10px; background: linear-gradient(90deg, #06B6D4, #b4b6ba, #F97316);"></div>
            <code style="font-size: 0.7rem;">WO_MAP_SCALES.divergent</code>
          </div>
          <div style="display: flex; align-items: center; gap: 1rem;">
            <span style="width: 100px; font-size: 0.75rem; color: var(--wo-text-secondary);">Categorical</span>
            <div style="flex: 1; height: 20px; border-radius: 10px; display: flex; overflow: hidden;">
              <div style="flex: 1; background: #6366F1;"></div>
              <div style="flex: 1; background: #22D3EE;"></div>
              <div style="flex: 1; background: #FBBF24;"></div>
              <div style="flex: 1; background: #F97316;"></div>
              <div style="flex: 1; background: #A78BFA;"></div>
              <div style="flex: 1; background: #34D399;"></div>
            </div>
            <code style="font-size: 0.7rem;">WO_MAP_SCALES.categorical</code>
          </div>
        </div>
      </section>
      
      <!-- API Reference -->
      <section class="hub-section">
        <h2>Referencia API</h2>
        
        <table class="api-table">
          <thead>
            <tr>
              <th>Clase</th>
              <th>Método Principal</th>
              <th>Descripción</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>WoH3Layer</code></td>
              <td><code>.addLayer(geojson)</code></td>
              <td>Capa de hexágonos H3 (Uber)</td>
            </tr>
            <tr>
              <td><code>WoGridLayer</code></td>
              <td><code>.generateGrid(bounds, fn)</code></td>
              <td>Cuadrícula con valores calculados</td>
            </tr>
            <tr>
              <td><code>WoHeatmap</code></td>
              <td><code>.addLayer(geojson)</code></td>
              <td>Mapa de calor con controles</td>
            </tr>
            <tr>
              <td><code>WoClusters</code></td>
              <td><code>.addLayer(geojson)</code></td>
              <td>Agrupamiento automático de puntos</td>
            </tr>
            <tr>
              <td><code>WoIsochrone</code></td>
              <td><code>.generateSimulated(center)</code></td>
              <td>Áreas de tiempo de viaje</td>
            </tr>
            <tr>
              <td><code>WoMarker</code></td>
              <td><code>.add(map, lngLat, opts)</code></td>
              <td>Marcadores personalizados</td>
            </tr>
            <tr>
              <td><code>WoPopup</code></td>
              <td><code>.stat(data)</code></td>
              <td>Popup con estadísticas</td>
            </tr>
            <tr>
              <td><code>WoLegend</code></td>
              <td><code>.gradient(config)</code></td>
              <td>Leyenda de gradiente</td>
            </tr>
            <tr>
              <td><code>WoDataPanel</code></td>
              <td><code>.create(config)</code></td>
              <td>Panel lateral de estadísticas</td>
            </tr>
            <tr>
              <td><code>WoHeatmapControls</code></td>
              <td><code>.create(heatmap, id)</code></td>
              <td>Controles UI para heatmap</td>
            </tr>
          </tbody>
        </table>
      </section>
      
      <!-- Usage Example -->
      <section class="hub-section">
        <h2>Ejemplo de Uso</h2>
        
        <div class="code-block">
          <div class="code-block__header">
            <span class="code-block__lang">JavaScript - Implementación Completa</span>
          </div>
          <div class="code-block__content">
<pre>// Inicializar mapa con tema Workalógico
const map = new WoMapbox('map-container', {
  center: [-99.1332, 19.4326],
  zoom: 12,
  style: 'workalogico'
});

// Esperar a que cargue
map.map.on('load', () => {
  
  // 1. Añadir capa de hexágonos H3
  const h3Layer = new WoH3Layer(map.map, { resolution: 8 });
  const hexData = h3Layer.pointsToHexagons(myPoints);
  h3Layer.addLayer(hexData, [0, 100])
         .addInteraction(onHover, onClick);
  
  // 2. Añadir heatmap
  const heatmap = new WoHeatmap(map.map, { colorMode: 'blue-yellow' });
  heatmap.addLayer(pointsGeoJSON, 'density');
  
  // Añadir controles UI
  WoHeatmapControls.create(heatmap, 'map-container');
  
  // 3. Añadir clusters
  const clusters = new WoClusters(map.map);
  clusters.addLayer(locationsGeoJSON)
          .onPointClick((feature) => {
            // Mostrar popup
            new mapboxgl.Popup()
              .setLngLat(feature.geometry.coordinates)
              .setHTML(WoPopup.stat({
                title: feature.properties.name,
                badge: 'Alto',
                badgeType: 'high',
                metrics: [
                  { value: '45K', label: 'Población' },
                  { value: '$18K', label: 'Ingreso' }
                ],
                score: 87
              }))
              .addTo(map.map);
          });
  
  // 4. Añadir leyenda
  document.getElementById('map-container').insertAdjacentHTML(
    'beforeend',
    WoLegend.gradient({
      title: 'Densidad',
      type: 'heat',
      labels: ['Bajo', 'Medio', 'Alto']
    })
  );
});</pre>
          </div>
        </div>
      </section>
      
      <!-- Footer -->
      <footer class="hub-footer">
        <p><a href="mapbox.html">← Mapbox Theme</a> | <a href="components.html">Componentes →</a></p>
      </footer>
    </main>
  </div>
  
  <!-- Scripts -->
  <script src="hub.js"></script>
  <script src="../wo-components/wo-mapbox.js"></script>
  
  <script>
    // Demo map
    let demoMap = null;
    let currentDemo = 'hexagons';
    let demoLayers = {};
    
    document.addEventListener('DOMContentLoaded', () => {
      if (typeof mapboxgl !== 'undefined') {
        mapboxgl.accessToken = MAPBOX_TOKEN;
        
        demoMap = new mapboxgl.Map({
          container: 'demo-map',
          style: WO_MAPBOX_STYLE,
          center: [-99.1332, 19.4326],
          zoom: 11,
          pitch: 30,
          antialias: true
        });
        
        demoMap.addControl(new mapboxgl.NavigationControl(), 'top-right');
        
        demoMap.on('load', () => {
          initDemoLayers();
          showDemo('hexagons');
        });
      }
    });
    
    function initDemoLayers() {
      // Generate sample data
      const center = [-99.1332, 19.4326];
      const points = [];
      for (let i = 0; i < 300; i++) {
        points.push({
          lng: center[0] + (Math.random() - 0.5) * 0.15,
          lat: center[1] + (Math.random() - 0.5) * 0.1,
          value: Math.random() * 100
        });
      }
      
      const pointsGeoJSON = {
        type: 'FeatureCollection',
        features: points.map(p => ({
          type: 'Feature',
          properties: { value: p.value, name: `Punto ${Math.floor(Math.random() * 1000)}` },
          geometry: { type: 'Point', coordinates: [p.lng, p.lat] }
        }))
      };
      
      // H3 Layer
      if (typeof h3 !== 'undefined') {
        demoLayers.h3 = new WoH3Layer(demoMap, { resolution: 8 });
        const hexData = demoLayers.h3.pointsToHexagons(points);
        demoLayers.h3.addLayer(hexData, [0, 100]).setVisibility(false);
      }
      
      // Grid Layer
      demoLayers.grid = new WoGridLayer(demoMap, { cellSize: 0.008 });
      const gridData = demoLayers.grid.generateGrid(
        [[center[0] - 0.08, center[1] - 0.05], [center[0] + 0.08, center[1] + 0.05]],
        (lng, lat) => {
          const dist = Math.sqrt(Math.pow(lng - center[0], 2) + Math.pow(lat - center[1], 2));
          return Math.max(0, 100 - dist * 1500 + Math.random() * 30);
        }
      );
      demoLayers.grid.addLayer(gridData, [0, 100]).setVisibility(false);
      
      // Heatmap
      demoLayers.heatmap = new WoHeatmap(demoMap, { radius: 25 });
      demoLayers.heatmap.addLayer(pointsGeoJSON, 'value').setVisibility(false);
      
      // Clusters
      demoLayers.clusters = new WoClusters(demoMap);
      demoLayers.clusters.addLayer(pointsGeoJSON).setVisibility(false);
      
      // Isochrones
      demoLayers.isochrones = new WoIsochrone(demoMap);
      const isoData = demoLayers.isochrones.generateSimulated(center, [1.5, 3, 5]);
      demoLayers.isochrones.addLayer(isoData).setVisibility(false);
    }
    
    function showDemo(type) {
      currentDemo = type;
      
      // Update buttons
      document.querySelectorAll('.demo-btn').forEach(btn => {
        btn.classList.toggle('active', btn.textContent.toLowerCase().includes(type.substring(0, 4)));
      });
      
      // Hide all layers
      Object.values(demoLayers).forEach(layer => {
        if (layer && layer.setVisibility) layer.setVisibility(false);
      });
      
      // Show selected layer
      switch(type) {
        case 'hexagons':
          if (demoLayers.h3) demoLayers.h3.setVisibility(true);
          break;
        case 'grid':
          if (demoLayers.grid) demoLayers.grid.setVisibility(true);
          break;
        case 'heatmap':
          if (demoLayers.heatmap) demoLayers.heatmap.setVisibility(true);
          break;
        case 'clusters':
          if (demoLayers.clusters) demoLayers.clusters.setVisibility(true);
          break;
        case 'isochrones':
          if (demoLayers.isochrones) demoLayers.isochrones.setVisibility(true);
          // Add center marker
          WoMarker.add(demoMap, [-99.1332, 19.4326], { type: 'primary', pulse: true });
          break;
      }
    }
  </script>
</body>
</html>
